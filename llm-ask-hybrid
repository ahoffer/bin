#!/usr/bin/env bash
# Unified ask: web search first, LLM fallback if web fails

set -euo pipefail

query="$*"
if [[ -z "$query" ]]; then
    echo "Usage: llm-ask-hybrid <question>" >&2
    exit 1
fi

# Try web search first
result=$(llm-search "$query" 2>/dev/null) || true

# Fallback to LLM if web search failed or returned empty
if [[ -z "$result" ]]; then
    result=$(llm-ask "$query" 2>/dev/null) || true
fi

if [[ -z "$result" ]]; then
    echo "Error: Both web search and LLM failed" >&2
    exit 1
fi

echo "$result"
